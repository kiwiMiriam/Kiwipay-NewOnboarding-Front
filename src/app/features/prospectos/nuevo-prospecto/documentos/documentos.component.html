<div class="documentos-container">
  <h2 class="section-title">Documentos</h2>
  <p class="section-description">
    Carga documentos relacionados con el prospecto. Formatos permitidos: PDF, JPG, JPEG, PNG.
    (M치ximo {{MAX_DOCUMENTOS}} documentos)
  </p>

  <!-- Secci칩n de carga de documentos -->
  <div class="upload-section">
    <div class="form-row">
      <div class="form-group">
        <label for="tipoDocumento">Tipo de Documento</label>
        <select
          id="tipoDocumento"
          [value]="tipoDocumentoSeleccionado"
          (change)="onTipoDocumentoChange($event)">
          <option value="">Seleccionar...</option>
          <option *ngFor="let tipo of TIPOS_PERMITIDOS" [value]="tipo.id">{{tipo.nombre}}</option>
        </select>
      </div>

      <div class="form-group upload-file-group">
        <label for="archivo">Archivo</label>
        <div class="upload-control">
          <button class="file-select-button" (click)="fileInput.click()">
            <span class="icon-upload"></span> Cargar Documento
          </button>
          <span class="file-name" *ngIf="archivoSeleccionado">{{archivoSeleccionado.name}}</span>
          <input
            #fileInput
            type="file"
            id="archivo"
            class="file-input"
            (change)="onArchivoChange($event)"
            accept=".pdf,.jpg,.jpeg,.png">
        </div>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group full-width">
        <label for="comentario">Comentario</label>
        <textarea
          id="comentario"
          rows="2"
          [(ngModel)]="comentario"
          placeholder="Agrega un comentario (opcional)"></textarea>
      </div>
    </div>

    <div class="error-message" *ngIf="mensajeError">
      <span class="icon-warning"></span> {{mensajeError}}
    </div>

    <div class="upload-actions">
      <button
        class="btn-primary"
        (click)="agregarDocumento()"
        [disabled]="!archivoSeleccionado || !tipoDocumentoSeleccionado || documentos.length >= MAX_DOCUMENTOS">
        Agregar
      </button>
    </div>
  </div>

  <!-- Tabla de documentos -->
  <div class="documentos-table-container">
    <div class="table-header">
      <div class="column tipo-column">Tipo de Documento</div>
      <div class="column archivo-column">Archivo</div>
      <div class="column comentario-column">Comentario</div>
      <div class="column accion-column">Acci칩n</div>
    </div>

    <div class="empty-state" *ngIf="documentos.length === 0">
      <span class="icon-file empty-icon"></span>
      <p>No hay documentos cargados</p>
    </div>

    <div class="table-body">
      <div class="table-row" *ngFor="let documento of documentos">
        <div class="column tipo-column">{{obtenerNombreTipoDocumento(documento.tipo)}}</div>
        <div class="column archivo-column">
          <div class="file-info">
            <span [class]="'icon-file ' + obtenerClaseIconoArchivo(documento.archivo)"></span>
            <div class="file-details">
              <span class="file-name">{{documento.archivo.name}}</span>
              <span class="file-size">{{formatearTamanoArchivo(documento.archivo.size)}}</span>
            </div>
          </div>
        </div>
        <div class="column comentario-column">{{documento.comentario || '-'}}</div>
        <div class="column accion-column">
          <button class="btn-icon delete-btn" (click)="eliminarDocumento(documento.id)">
            <span class="icon-trash"></span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Botones de navegaci칩n -->
  <div class="navigation-buttons">
    <button class="btn-secondary" routerLink="/dashboard/cotizador">Anterior</button>
    <button class="btn-primary" routerLink="/dashboard/datos-clientes">Siguiente</button>
  </div>
</div>
